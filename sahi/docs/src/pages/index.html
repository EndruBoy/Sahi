<!--Web Automation and Test Tool-->
<h4><a name="intro">Introduction</a></h4>

Sahi is an automation and testing tool for web applications, with the facility to record and playback scripts.<br/>
Developed in java and javascript, this tool uses simple javascript to execute events on the browser. <br/>
Features include, in-browser controls, text based scripts, ant support for playback of suites of tests,<br/>
and multi threaded playback. It supports HTTP and HTTPS.<br/>

<br/>

Sahi runs as a proxy server and the browser needs to use the sahi server as its proxy.<br/>
Sahi then injects javascript so that it can access elements in the webpage.<br/>
This makes the tool independent of the website/ web application.<br/>

(<a href="#top">Top</a>)

<br/><h4><a name="features">Features</a></h4>

<ul>
<li> Recording of browser actions.</li>

<li> Playback of recorded/scripted actions.</li>
<li> Accessor Viewer for identifying html elements for scripting</li>
<li> Easily editable scripts (text files)</li>
<li> Simple APIs</li>
<li> Integrates with ant builds</li>
<li> Logging/reports</li>

<li> Script is in javascript hence supports concepts and constructs that javascript supports</li>
<li> Support for global variables stored across pages in a test and across tests in a suite.</li>
<li> Script refactorable into functions and files.</li>
<li> Scripts runnable through url.</li>
Bugs can be recorded by testers and the sahi script can be published on a web server.<br/>
This url can be included in bug reports.<br/>
Developers can reproduce the bug by pointing to that url in the bug report.<br/>

<li> Scripts automatically available to others through HTTP</li>
<li> Very lightweight</li>
<li> Tests do not need the browser window to be in focus.</li>
<li> Suites can run in multiple threads thus reducing the test execution time.</li>
<li> Supports external proxy and HTTPS.</li>
</ul>



(<a href="#top">Top</a>)

<br/><h4><a name="download">Downloading Sahi</a></h4>

Download the latest Sahi zip file from <a href="http://sourceforge.net/projects/sahi/">http://sourceforge.net/projects/sahi/</a><br/>



(<a href="#top">Top</a>)

<br/><h4><a name="prereq">Prerequisites</a></h4>
<a href="http://java.sun.com" target="_blank">JRE 1.4 or above</a> is needed for running Sahi.</br>
if the module is to be rebuilt from source, JDK 1.4 or above, <a href="http://ant.apache.org/bindownload.cgi" target="_blank">ant</a> 1.6 or above, log4j.jar and junit.jar are also needed.</br>

(<a href="#top">Top</a>)
<br/><h4><a name="install">Installing Sahi</a></h4>

1) Unzip sahi.zip to a desired location<br/>


(<a href="#top">Top</a>)

<br/><h4><a name="started">Getting started</a></h4>

<b>Starting Sahi:</b><br/>
<p>
    Windows:<br/>

    - Go to &lt;sahi_root&gt;\bin and run sahi.bat<br/>
    Linux<br/>
    - Go to &lt;sahi_root&gt;/bin and run sahi.sh<br/>


Note that by default Sahi uses port 9999.
This can be modified through <a href="props.html">sahi.properties</a>
</p>
<br/>

<b>Configuring the browser:</b><br/><br/>

&nbsp;&nbsp;&nbsp;&nbsp;<b>Firefox:</b><br/>
<ul type="square">

	<li>Go to Tools &gt; Options &gt; General &gt; Connection Settings &gt;</li>
	<li>Set to "Manual Proxy Configuration"</li>
	<li>Set "HTTP Proxy" to "localhost"</li>

	<li>Set "Port" to "9999". (This setting can be modified through &lt;sahi_root&gt;/config/<a href="props.html">sahi.properties</a>)</li>

	<li>Keep "Use the same proxy for all protocol" unchecked as Sahi does not understand protocols other than HTTP</li>
	<li>NOTE: "No Proxy for" should NOT have localhost in it.</li>
</ul>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<b>Internet Explorer:</b><br/>
<ul type="square">

	<li>Go to Tools &gt; Internet Options &gt; Connections &gt; LAN Settings &gt;</li>

	<li>In "Proxy server" section, Check "Use a proxy server for your LAN"</li>
	<li>Set "Address" to "localhost"</li>
	<li>Set "Port" to "9999"</li>

	<li>Leave "Bypass proxy server for local addresses" unchecked</li>
	<li>OK &gt; OK : )</li>

</ul>

While working with Sahi it may become annoying to have to switch between proxy and no proxy, or to another proxy.<br>
There are a few plugins/freeware available on the net to ease this.<br>
My personal favorite while working on Firefox is "Proxy Button". It helps in a single click toggling of proxy.<br>

These tools can considerably enhance the experience of using Sahi.<br>

<br/><br/>

<b><a name="demo">Starting the bundled demo web server if needed, for learning and understanding Sahi APIs:</a></b><br/>
    Windows:<br/>

    - Go to &lt;sahi_root&gt;\bin and run web.bat<br/>
    Linux<br/>
    - Go to &lt;sahi_root&gt;/bin and run web.sh<br/>

<br/>
Go to url http://localhost:10000/demo/index.htm and play around with the different pages.<br/>
It gives a fair idea of how elements are accessed through Sahi.<br/><br/>

Note that by default Sahi uses port 9999 and the web server uses port 10000 (sahi's port + 1). <br>
These can be modified through <a href="props.html">sahi.properties</a>

<br/>

(<a href="#top">Top</a>)

<br/><h4><a name="record">Recording through Sahi</a></h4>


<ul type="square">
	<li>Press <a href="props.html#hotkey">ALT</a> and double click on the window which you want to record.</li>
	<li>On the popup that appears, give a name for the script you wish to generate, and click 'Record'</li>
	<li>Most actions on the page will now get recorded.</li>
	<li>Moving the mouse over any html element while pressing Ctrl key will show the javascript accessor info in the popup.</li>
	<li>Clicking the "Add Assertions" button generates assertions for the element. These assertions can be added to the script by clicking "Add to Script"</li>
</ul>

The script being generated can be viewed by opening the &lt;script_name&gt;.sah file in the scripts directory.<br/>
The script can be edited even while recording, so that logical segregation into functions etc. can be done as recording happens.<br/>


<ul type="square">
	<li>Once done, click stop.</li>
</ul>
Note that custom code can be tested, by entering code in the "debug" textarea and clicking on "Test ->". <br/>
The command will be executed and the result will be displayed in the textbox near the "Test ->" button.<br/>
Once confirmed that the desired result has been achieved, that code snippet can be added to the recording by clicking "Append to Recording"<br/>

<br/>
You could use the <a href="#demo">demo application</a> bundled with Sahi to get your feet wet.<br/>
(<a href="#top">Top</a>)


<br/><h4><a name="playback">Playing back</a></h4>

<ul type="square">
	<li>Open (alt-dblclick) the popup window.</li>
	<li>Select script file from the dropdown.</li>
	<li>Or go to the "[from url]" section and specify the full url of the script file. (eg. http://<i>proxyhost:proxyport</i>/_s_/scrcipts/<i>scriptName</i>.sah)</li>
	<li>Click 'Set'.</li>
	<li>Wait for the pages to reload.</li>
	<li>Click 'Play'.</li>
</ul>


(<a href="#top">Top</a>)

<br/><h4>Running test from the console</a></h4>

If you wish to run a script called "MySahiScript.sah" on a page like say, http://<b>www.domain.com</b>/dir/page1.jsp do<br/>
<br/>
<pre>
"C:\Program Files\Mozilla Firefox\firefox.exe" "http://www.sahidomain.com/_s_/dyn/auto?file=<b>MySahiScript.sah</b>&amp;startUrl=<b>http://www.domain.com/dir/page1.jsp</b>" <br/>
Note that www.sahidomain.com at the start of the URL is hardcoded, and should be used as is. Only the values in bold need to be changed.
</pre>
<br/>
(<a href="#top">Top</a>)

<br/><h4><a name="suites">Suites</a></h4>

Multiple tests can be run through ant. For each test in the suite, the ant target opens a browser, runs the test and closes the browser, <br/>
The ant target specifies a suite file, say SuiteName.suite. <br/><br/>
The syntax of writing the suite file is:<br/><br/>
&lt;testName.sah&gt; &lt;absolute url or url relative to the baseurl in ant target&gt;

<br/><br/>
eg.<br/>
test1.sah	/startPageForTest1.jsp<br/>
test2.sah	http://www.d2.com/startPageForTest2.htm<br/>
test3.sah	abc/startPageForTest3.htm

<br/><br/>The ant target is like:

<pre>
<b>
&lt;taskdef name="sahi" classname="net.sf.sahi.ant.RunSahiTask" classpath="${basedir}/sahi/lib/ant-sahi.jar"&gt;
&lt;/taskdef&gt;

&lt;sahi suite="${basedir}/sahi/scripts/SuiteName.suite"
	browser="C:\\Program Files\\Internet Explorer\\iexplore.exe"
	baseurl="http://localhost:8888/path/"
/&gt;

</b>
</pre>
<a href="ant.html">Sahi Ant Target Description<a/><br/>
<b>For details on running this target, please look at demo.xml in sahi root folder</b>
<br/>To run demo.xml, type "ant -f demo.xml"
<br/>

(<a href="#top">Top</a>)
<h4><a name="logging">Logging</a></h4>

Logs are created in "logs/playback/" directory.<br/>
Log results can be accessed through the browser through http://mydomain/_s_/logs/
<br/>

(<a href="#top">Top</a>)

<br/><h4><a name="limitations">Limitations</a></h4>

<ul type="square">
	<li>FileUpload using &lt;input type="file"&gt; is not supported.</li>
	<li>Frames having pages from different domains in the same frameset does not work properly.</li>
</ul>


(<a href="#top">Top</a>)

<br/><h4><a name="problems">Problems</a></h4>

<ul type="square">
	<li>Controller window does not open.
	<ul>
		<li>Turn off all popup blockers.
		<li>Try CTRL-ALT-DblClick
		<li>Try changing the <a href="props.html#hotkey">Hot Key</a>
	</ul>
	<li>HTTPS pages display a <a href="ssl_alert.html" target="_blank">security alert</a>.
	<ul>
		<li>One needs to modify the security certificates in the certs folder, with the right parameters.
	</ul>
	<li>The Controller does not work correctly or gives an error
	<ul>
		<li>Close the Controller and reopen it.
	</ul>
</ul>

(<a href="#top">Top</a>)

<h4><a name="notyet">Not yet supported, but coming in</a></h4>

<ul type="square">
	<li>Javascript alerts, confirms and prompts</li>
	<li>SSL certificate creation utility</li>
	<li>Better Sahi Controller with Debugging support</li>
	<li>Support for non-english languages</li>
</ul>
(<a href="#top">Top</a>)
<br/><br/>
