<html>
<head>
    <title>Sahi - Ant Integration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="sahi.css">
</head>

<body>
<table width="100%" border="0"><tr><td>
<br/>
<h2>Sahi - Ant Integration</h2>
</td>
<td align="right">
<a href="http://sourceforge.net"><imag src="http://sourceforge.net/sflogo.php?group_id=151639&amp;type=3" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>
<br/>
<a href="index.html">Sahi</a>&nbsp;&nbsp;
</td>
</tr></table>
<table width="100%">
<tr><td width="150px" valign="top">
	<br/>
	<div  class="menu">
	<a href="index.html">Introduction</a></br>
	<a href="index.html#features">Features</a></br>
	<a href="index.html#download">Downloading Sahi</a></br>
	<a href="index.html#prereq">Prerequisites</a></br>
	<a href="index.html#install">Installing Sahi</a></br></br>
	<a href="index.html#started">Getting started</a></br>
	<a href="index.html#record">Recording through Sahi</a></br>
	<a href="index.html#playback">Playing back</a></br></br>
	Documentation: <br/>
	<a href="scripting.html">Scripting</a>, <a href="apis.html">APIs</a></br></br>
	<a href="index.html#suites">Suites</a></br>
	<a href="ant.html">Ant Support<a/><br/></br>
	<a href="index.html#logging">Logging</a></br></br>
	<a href="devnotes.html">Sahi - Technical Aspects</a></br></br>
	<a href="index.html#problems">Problems</a></br>
	<a href="index.html#notyet">Not yet supported, but coming in</a></br>
	</div>
</td>
<td>
<div  class="content">
<!--Ant Integration-->
<h3>Sahi</h3>
<h3>Description</h3>
<p>Runs a suite of sahi files. This opens multiple browser windows
, executes sahi scripts, and logs the results. The build can be made to fail
based on a failureproperty.
</p>

<h3>Parameters</h3>
<p>
<table border="1" cellpadding="2" cellspacing="0">
<tr><td><b>Attribute</b></td><td><b>Description</b></td><td><b>Required</b></td></tr>
<tr><td>suite</td><td>path to suite file</td><td></td></tr>
<tr><td>browser</td><td>Path to browser executable</td><td></td></tr>
<tr><td>baseurl</td><td>url relative to which all urls to be tested will be resolved</td><td></td></tr>
<tr><td>sahihost</td><td>ip or hostname of server where sahi is running</td><td></td></tr>
<tr><td>sahiport</td><td>port where sahi is running</td><td></td></tr>
<tr><td>failureproperty</td><td>Name of property which will be set to false in case build fails.</td><td></td></tr>
<tr><td>haltonfailure</td><td>Takes "true" or "false". Specifies if build should stop executing other tests if one test fails.</td><td></td></tr>
<tr><td>threads</td><td>Number of simultaneous browser instances where sahi tests will be run.</td><td></td></tr>
</table>
</p>


<h3>Example</h3>
build xml for running the sample web server bundled with sahi.<br/><br/>
The demo could be run by running "ant -f demo.xml sahitests" from the sahi base folder.

<pre style="background-color:lightgreen;border:20px solid lightgreen;width:1000px">

&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;project name="demo" default="sahitests"&gt;
	&lt;taskdef name="sahi" classname="net.sf.sahi.ant.RunSahiTask" classpath="lib/ant-sahi.jar"/&gt;

	&lt;target name="sahitests" description="start the server and run sahi tests"&gt;
		&lt;parallel&gt;
			&lt;sequential&gt;
				&lt;waitfor maxwait="3" maxwaitunit="minute" checkevery="100"&gt;
					&lt;http url="http://localhost:10000/demo/index.htm"/&gt;
				&lt;/waitfor&gt;<pre style="font-weight:bold;border:0px solid lightgreen;">
				&lt;sahi suite="../scripts/demo.suite"
					browser="C:\\Program Files\\Internet Explorer\\iexplore.exe"
					baseurl="http://localhost:10000/demo/"
					sahihost="localhost"
					sahiport="9999"
					failureproperty="sahi.failed"
					haltonfailure="false"
					threads="2"
					/&gt;</pre>
				&lt;antcall target="stop-web"/&gt;
				&lt;antcall target="failsahi"/&gt;
			&lt;/sequential&gt;
			&lt;antcall target="start-web"/&gt;
		&lt;/parallel&gt;
	&lt;/target&gt;

	&lt;target name="failsahi" if="sahi.failed"&gt;
		&lt;fail message="Sahi tests failed!"/&gt;
	&lt;/target&gt;

	&lt;target name="start-web" description="starts web"&gt;
		&lt;java classname="net.sf.sahi.WebServer" fork="true" dir="bin" &gt;
			&lt;classpath location="lib/sahi.jar"/&gt;
		&lt;/java&gt;
	&lt;/target&gt;

	&lt;target name="stop-web" description="stop web server"&gt;
		&lt;get dest="stopserver.htm" src="http://localhost:10000/dyn/stopserver" ignoreerrors="true" /&gt;
		&lt;delete file="stopserver.htm"/&gt;
	&lt;/target&gt;


	&lt;target name="sahireport" description="show report"&gt;
		&lt;exec command="C:\\Program Files\\Internet Explorer\\iexplore.exe file:///C:/my/sahi/logs/playback/"/&gt;
	&lt;/target&gt;

	&lt;target name="start" description="starts proxy"&gt;
		&lt;java classname="net.sf.sahi.Proxy" fork="true" dir="bin"&gt;
			&lt;classpath location="lib/sahi.jar"/&gt;
		&lt;/java&gt;
	&lt;/target&gt;

	&lt;target name="stopsahi" description="stop sahi server"&gt;
		&lt;sahi stop="true" sahihost="localhost" sahiport="9999"/&gt;
	&lt;/target&gt;
&lt;/project&gt;

</pre>

</div>
</td>
</tr>
</table>

Please send your feedback to <a href="http://sourceforge.net/users/narayanraman/">V Narayan Raman</a>.
<br/><br/>

<!--
<script src="http://www.treepie.org/counter.js"></script>
-->
<!--RiteCounter-->
<!--script type="text/javascript" src="http://www.ritecounter.com/scripts/counters.php?id=6641"></script>
<noscript><a href="http://www.ritecounter.com"><img src="http://www.ritecounter.com/scripts/htmlc.php?id=6641" alt="Free Hit Counter Code" border=0></a></noscript>
-->
<!--END RiteCounter-->

</body>
</html>
